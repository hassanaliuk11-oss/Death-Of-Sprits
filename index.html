<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hassan Jatoi | The Eternal Archive</title>
    
    <!-- External Assets -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <!-- Massive Font Library Import -->
    <link href="https://fonts.googleapis.com/css2?family=Aboreto&family=Almendra&family=Amiri:ital@1&family=Baskervville:ital@1&family=Beau+Rivage&family=Bodoni+Moda:ital,opsz,wght@1,6..96,400&family=Castoro+Titling&family=Cinzel+Decorative:wght@400;700&family=Cinzel:wght@400;700&family=Cormorant+Garamond:ital,wght@0,300;1,300&family=Crimson+Pro:ital,wght@1,200&family=Dancing+Script&family=EB+Garamond:ital@1&family=Eczar&family=Fance&family=Faurder+One&family=Federo&family=Fondamento&family=Fraunces:ital,opsz,wght@1,9..144,300&family=Gilda+Display&family=Gloria+Hallelujah&family=Great+Vibes&family=Grenze+Gotisch&family=IM+Fell+English+SC&family=Inria+Serif:ital@1&family=Italiana&family=Josefin+Sans:wght@300&family=Jura:wght@300&family=La+Belle+Aurore&family=Libre+Baskerville:ital@1&family=Lobster+Two:ital@1&family=Lora:ital@1&family=Lustria&family=Marcellus&family=Montserrat:wght@200&family=Nanum+Myeongjo&family=Niconne&family=Old+Standard+TT:ital@1&family=Oranienbaum&family=Pinyon+Script&family=Playfair+Display+SC&family=Quicksand:wght@300&family=Quintessential&family=Rakkas&family=Reenie+Beanie&family=Rosarivo:ital@1&family=Sacramento&family=Shadows+Into+Light&family=Spectral:ital,wght@1,200&family=Syncopate:wght@400;700&family=Tangerine:wght@700&family=UnifrakturMaguntia&family=Vidaloka&family=Yantra+Roman&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --gold: #d4af37; 
            --soft-white: #e5e5e5;
            --dark-bg: #0a0a0a; 
            --glass: rgba(15, 15, 15, 0.98);
        }
        
        body { 
            background-color: var(--dark-bg); 
            color: var(--soft-white); 
            margin: 0; 
            scroll-behavior: smooth; 
            font-family: 'Marcellus', serif;
            overflow-x: hidden;
        }

        .bg-vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, transparent 30%, rgba(0,0,0,0.85) 100%);
            z-index: 1; pointer-events: none;
        }

        #dust-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; opacity: 0.3;
        }

        .nav-bar { 
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(15px);
            position: fixed; top: 0; width: 100%; z-index: 1000; 
            padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
        }

        .gold-text {
            background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        /* Cover Page Styles */
        .cover-page {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 10;
            text-align: center;
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
        }

        .cover-frame {
            border: 1px solid rgba(212, 175, 55, 0.3);
            padding: 4rem;
            position: relative;
            max-width: 90%;
        }

        .cover-frame::before, .cover-frame::after {
            content: '';
            position: absolute;
            width: 20px; height: 20px;
            border: 2px solid var(--gold);
        }
        .cover-frame::before { top: -5px; left: -5px; border-right: 0; border-bottom: 0; }
        .cover-frame::after { bottom: -5px; right: -5px; border-left: 0; border-top: 0; }

        .settings-trigger {
            position: fixed; bottom: 30px; right: 30px; z-index: 2000;
            background: var(--gold); color: black;
            width: 55px; height: 55px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.6);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .settings-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92); backdrop-filter: blur(12px);
            z-index: 1999; display: none; align-items: center; justify-content: center;
        }

        .settings-card {
            background: var(--glass); border: 1px solid rgba(212,175,55,0.2);
            padding: 30px; border-radius: 20px; width: 95%; max-width: 450px;
        }

        .prose-container { max-width: 800px; margin: 0 auto; padding: 100px 20px; position: relative; z-index: 10; }
        .prose-entry { 
            margin-bottom: 100px; padding: 50px 35px;
            background: rgba(255, 255, 255, 0.015);
            border-radius: 24px; border: 1px solid rgba(255,255,255,0.03);
            opacity: 0; transform: translateY(30px); transition: 1.2s ease-out;
        }
        .prose-entry.visible { opacity: 1; transform: translateY(0); }
        .prose-title { font-size: 2.2rem; margin-bottom: 2rem; text-align: center; font-family: 'Cinzel Decorative', serif; }
        .prose-body { line-height: 1.8; text-align: center; color: #ddd; white-space: pre-wrap; }

        .btn-action {
            background: transparent; border: 1px solid var(--gold); color: var(--gold);
            padding: 8px 18px; font-size: 10px; letter-spacing: 2px;
            text-transform: uppercase; cursor: pointer; transition: 0.3s;
            border-radius: 4px;
        }
        .btn-action:hover { background: var(--gold); color: black; }

        .scroll-line { 
            position: fixed; top: 0; left: 0; height: 2px; 
            background: linear-gradient(to right, var(--gold), #fff); z-index: 1100; width: 0%;
        }

        @media (max-width: 768px) {
            .cover-frame { padding: 2rem; }
            .prose-title { font-size: 1.6rem; }
        }

        @media print {
            .no-print { display: none !important; }
            body { background: white; color: black; }
            .prose-entry { break-inside: avoid; border: none; background: none; color: black; }
            .prose-body { color: black; }
            .gold-text { color: black !important; -webkit-text-fill-color: black !important; }
        }
    </style>
</head>
<body onclick="handleInteraction()">

    <div class="scroll-line" id="scrollProgress"></div>
    <div class="bg-vignette no-print"></div>
    <canvas id="dust-canvas" class="no-print"></canvas>

    <nav class="nav-bar no-print">
        <div class="flex flex-col">
            <span class="gold-text text-lg tracking-[0.2em] font-royal uppercase">Hassan Jatoi</span>
            <span class="text-[7px] opacity-40 tracking-[0.3em]">Eternal Archive v2.0</span>
        </div>
        <div class="flex gap-3">
            <button class="btn-action" id="audioBtn" onclick="toggleAudio()">Play</button>
            <button class="btn-action" onclick="downloadPDF()">Export</button>
        </div>
    </nav>

    <div id="capture-area">
        <!-- New Cover Page -->
        <div class="cover-page">
            <div class="cover-frame">
                <div class="w-40 h-40 mx-auto rounded-full border-2 border-gold/40 p-1 mb-10 overflow-hidden">
                    <img src="https://i.ibb.co/2YtrCjnY/1000203412.jpg" alt="Hassan Jatoi" class="w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-1000">
                </div>
                <h1 class="gold-text text-5xl md:text-7xl font-royal tracking-[0.3em] uppercase mb-4">Hassan Jatoi</h1>
                <div class="h-[1px] w-32 bg-gold/40 mx-auto mb-6"></div>
                <p class="text-sm tracking-[0.6em] uppercase opacity-60 mb-12">The Eternal Archive</p>
                <p class="font-royal text-[10px] tracking-[0.2em] opacity-40 italic">A Collection of Unspoken Truths & Silent Grief</p>
            </div>
            <div class="absolute bottom-10 animate-bounce no-print">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="opacity-20"><path d="M7 13l5 5 5-5M7 6l5 5 5-5"/></svg>
            </div>
        </div>

        <div id="prose-list" class="prose-container">
            <!-- Dynamic Items -->
        </div>
    </div>

    <!-- Settings Trigger -->
    <div class="settings-trigger no-print" onclick="toggleSettings()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
    </div>

    <!-- Settings Overlay -->
    <div id="settingsMenu" class="settings-overlay no-print">
        <div class="settings-card">
            <h3 class="gold-text mb-6 text-center tracking-[0.2em] uppercase text-xs">Aesthetic Controls</h3>
            <div class="mb-6">
                <label class="block text-[8px] uppercase tracking-widest text-gold/80 mb-2">Typography</label>
                <select id="moodSelect" onchange="updateStyles()" class="w-full bg-black border border-gold/30 p-2 rounded text-[10px] text-white">
                    <option value="'Marcellus', serif">Marcellus (Default)</option>
                    <option value="'Cinzel Decorative', cursive">Cinzel (Royal)</option>
                    <option value="'Cormorant Garamond', serif">Garamond (Poetic)</option>
                    <option value="'Pinyon Script', cursive">Pinyon (Calligraphy)</option>
                </select>
            </div>
            <div class="mb-8">
                <label class="block text-[8px] uppercase tracking-widest text-gold/80 mb-2">Size: <span id="sizeVal">18px</span></label>
                <input type="range" id="sizeSlider" min="14" max="28" value="18" oninput="updateStyles()" class="w-full accent-gold">
            </div>
            <button class="btn-action w-full py-2" onclick="toggleSettings()">Close</button>
        </div>
    </div>

    <audio id="pianoAudio" loop preload="auto" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3"></audio>
    <audio id="windAudio" loop preload="auto" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-15.mp3"></audio>

    <script>
        const myWork = [
            {
                "title": "The Death of Spirits",
                "text": "The gods have folded their wings and slept,\nLeaving the sky to the birds of prey.\nWhat died within us was not the body,\nBut the light that used to guide the way.\n\nNow we wander in a garden of marble,\nWaiting for a voice that has long since faded."
            },
            {
                "title": "A Symphony of Loss",
                "text": "The house is full of echoes that do not belong to me.\nI hear the turn of a key in a door that has been locked for years.\nThe silence is a heavy shroud, woven from the threads of everything we never said."
            }
        ];

        const pianoAudio = document.getElementById('pianoAudio');
        const windAudio = document.getElementById('windAudio');
        let initialized = false;

        function render() {
            const list = document.getElementById('prose-list');
            list.innerHTML = '';
            myWork.forEach((item, i) => {
                const div = document.createElement('div');
                div.className = 'prose-entry';
                div.innerHTML = `
                    <h2 class="prose-title gold-text">${item.title}</h2>
                    <div class="prose-body">${item.text}</div>
                `;
                list.appendChild(div);
            });
            updateStyles();
            observe();
        }

        function toggleSettings() {
            const menu = document.getElementById('settingsMenu');
            menu.style.display = (menu.style.display === 'flex') ? 'none' : 'flex';
        }

        function updateStyles() {
            const font = document.getElementById('moodSelect').value;
            const size = document.getElementById('sizeSlider').value;
            document.getElementById('sizeVal').innerText = size + 'px';
            document.querySelectorAll('.prose-body').forEach(el => {
                el.style.fontFamily = font;
                el.style.fontSize = size + 'px';
            });
        }

        function observe() {
            const observer = new IntersectionObserver(entries => {
                entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('visible'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.prose-entry').forEach(el => observer.observe(el));
        }

        async function handleInteraction() {
            if(!initialized) {
                initialized = true;
                pianoAudio.volume = 0.2;
                windAudio.volume = 0.05;
                try {
                    await pianoAudio.play().catch(() => {});
                    await windAudio.play().catch(() => {});
                    document.getElementById('audioBtn').innerText = "Playing";
                } catch(e) {}
            }
        }

        function toggleAudio() {
            if(pianoAudio.paused) {
                pianoAudio.play(); windAudio.play();
                document.getElementById('audioBtn').innerText = "Playing";
            } else {
                pianoAudio.pause(); windAudio.pause();
                document.getElementById('audioBtn').innerText = "Mute";
            }
        }

        window.onscroll = () => {
            const scrolled = (document.documentElement.scrollTop / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
            document.getElementById("scrollProgress").style.width = scrolled + "%";
        };

        const canvas = document.getElementById('dust-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function initParticles() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            particles = Array.from({length: 80}, () => ({
                x: Math.random() * canvas.width, y: Math.random() * canvas.height,
                s: Math.random() * 1.2, vx: (Math.random()-0.5)*0.2, vy: (Math.random()-0.5)*0.2
            }));
        }
        function animate() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "rgba(212,175,55,0.15)";
            particles.forEach(p => {
                ctx.beginPath(); ctx.arc(p.x, p.y, p.s, 0, Math.PI*2); ctx.fill();
                p.x+=p.vx; p.y+=p.vy;
                if(p.x<0)p.x=canvas.width; if(p.x>canvas.width)p.x=0;
                if(p.y<0)p.y=canvas.height; if(p.y>canvas.height)p.y=0;
            });
            requestAnimationFrame(animate);
        }

        function downloadPDF() {
            const element = document.getElementById('capture-area');
            html2pdf().from(element).set({
                margin: 0, filename: 'Hassan_Jatoi_Archive.pdf',
                html2canvas: { scale: 2, useCORS: true }, 
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            }).save();
        }

        window.onload = () => { render(); initParticles(); animate(); };
        window.onresize = initParticles;
    </script>
</body>
</html>
